#!/bin/bash
# Claude Skills è‡ªåŠ¨åˆ›å»ºè„šæœ¬
# ä½¿ç”¨æ–¹æ³•: ./create-skill.sh <skill-name> "<ä¸­æ–‡åç§°>" "<æè¿°>"

set -e

# é¢œè‰²å®šä¹‰
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# æ£€æŸ¥å‚æ•°
if [ $# -lt 3 ]; then
    echo -e "${YELLOW}ä½¿ç”¨æ–¹æ³•:${NC}"
    echo "  ./create-skill.sh <skill-name> \"<ä¸­æ–‡åç§°>\" \"<æè¿°>\""
    echo ""
    echo -e "${YELLOW}ç¤ºä¾‹:${NC}"
    echo "  ./create-skill.sh backend-architect \"åç«¯æ¶æ„å¸ˆ\" \"æ“…é•¿APIè®¾è®¡ã€æ•°æ®åº“æ¶æ„ã€ç³»ç»Ÿè®¾è®¡\""
    exit 1
fi

SKILL_NAME=$1
SKILL_CN_NAME=$2
SKILL_DESC=$3
SKILL_DIR=~/.claude/skills/$SKILL_NAME
CURRENT_DATE=$(date +%Y-%m)

echo -e "${BLUE}ğŸš€ å¼€å§‹åˆ›å»º Skill: $SKILL_NAME${NC}"

# åˆ›å»ºç›®å½•
if [ -d "$SKILL_DIR" ]; then
    echo -e "${YELLOW}âš ï¸  ç›®å½•å·²å­˜åœ¨ï¼Œå°†è¦†ç›–: $SKILL_DIR${NC}"
else
    mkdir -p "$SKILL_DIR"
    echo -e "${GREEN}âœ… åˆ›å»ºç›®å½•: $SKILL_DIR${NC}"
fi

# åˆ›å»º SKILL.md æ–‡ä»¶
cat > "$SKILL_DIR/SKILL.md" <<EOF
---
name: $SKILL_NAME
description: $SKILL_DESC å½“ç”¨æˆ·æåˆ°"[å…³é”®è¯1]"ã€"[å…³é”®è¯2]"ã€"[å…³é”®è¯3]"æ—¶ä½¿ç”¨æ­¤æŠ€èƒ½ã€‚
---

# $SKILL_CN_NAME

## ä½•æ—¶ä½¿ç”¨æ­¤Skill
å½“ç”¨æˆ·å‡ºç°ä»¥ä¸‹ä»»ä¸€éœ€æ±‚æ—¶ï¼Œä½¿ç”¨æ­¤æŠ€èƒ½ï¼š
- [ä½¿ç”¨åœºæ™¯1]
- [ä½¿ç”¨åœºæ™¯2]
- [ä½¿ç”¨åœºæ™¯3]
- [ä½¿ç”¨åœºæ™¯4]
- [ä½¿ç”¨åœºæ™¯5]

## æ ¸å¿ƒç›®æ ‡
[æè¿°è¿™ä¸ª Skill è¦è¾¾æˆçš„æ ¸å¿ƒç›®æ ‡ï¼Œ1-2å¥è¯]

## æ‰§è¡Œæµç¨‹

### ç¬¬ä¸€æ­¥ï¼š[æ­¥éª¤åç§°]
**ç›®æ ‡**ï¼š[è¿™ä¸€æ­¥è¦è¾¾æˆä»€ä¹ˆ]

**æ£€æŸ¥è¦ç‚¹**ï¼š
1. **[æ£€æŸ¥é¡¹1]**
   - âŒ åä¾‹è¯´æ˜
   - âœ… æ­£ä¾‹è¯´æ˜

2. **[æ£€æŸ¥é¡¹2]**
   - å…·ä½“è¦æ±‚
   - æ³¨æ„äº‹é¡¹

3. **[æ£€æŸ¥é¡¹3]**
   - å®æ–½ç»†èŠ‚

### ç¬¬äºŒæ­¥ï¼š[æ­¥éª¤åç§°]
**ç›®æ ‡**ï¼š[è¿™ä¸€æ­¥è¦è¾¾æˆä»€ä¹ˆ]

**æ£€æŸ¥è¦ç‚¹**ï¼š
1. **[æ£€æŸ¥é¡¹1]**
   - è¯´æ˜å’Œç¤ºä¾‹

2. **[æ£€æŸ¥é¡¹2]**
   - è¯´æ˜å’Œç¤ºä¾‹

### ç¬¬ä¸‰æ­¥ï¼š[æ­¥éª¤åç§°]
**ç›®æ ‡**ï¼š[è¿™ä¸€æ­¥è¦è¾¾æˆä»€ä¹ˆ]

**å®æ–½è§„èŒƒ**ï¼š
1. **[è§„èŒƒ1]**
   \`\`\`
   // ä»£ç ç¤ºä¾‹ï¼ˆå¦‚é€‚ç”¨ï¼‰
   \`\`\`

2. **[è§„èŒƒ2]**
   - å…·ä½“è¦æ±‚

## å·¥å…·å’Œèµ„æº

### æ¨èå·¥å…·
- **[å·¥å…·1]**ï¼šç”¨é€”è¯´æ˜
- **[å·¥å…·2]**ï¼šç”¨é€”è¯´æ˜
- **[å·¥å…·3]**ï¼šç”¨é€”è¯´æ˜

### å‚è€ƒèµ„æº
- [èµ„æºé“¾æ¥1]
- [èµ„æºé“¾æ¥2]

## è´¨é‡æ ‡å‡†

### [è´¨é‡ç»´åº¦1]
- âœ… [å…·ä½“æ ‡å‡†1]
- âœ… [å…·ä½“æ ‡å‡†2]
- âœ… [å…·ä½“æ ‡å‡†3]

### [è´¨é‡ç»´åº¦2]
- âœ… [å…·ä½“æ ‡å‡†1]
- âœ… [å…·ä½“æ ‡å‡†2]

### [è´¨é‡ç»´åº¦3]
- âœ… [å…·ä½“æ ‡å‡†1]
- âœ… [å…·ä½“æ ‡å‡†2]

## æœ€ä½³å®è·µæ¸…å•

- [ ] [æœ€ä½³å®è·µ1]
- [ ] [æœ€ä½³å®è·µ2]
- [ ] [æœ€ä½³å®è·µ3]
- [ ] [æœ€ä½³å®è·µ4]
- [ ] [æœ€ä½³å®è·µ5]
- [ ] [æœ€ä½³å®è·µ6]
- [ ] [æœ€ä½³å®è·µ7]
- [ ] [æœ€ä½³å®è·µ8]

## å¸¸è§é—®é¢˜è§£å†³

### [é—®é¢˜ç±»å‹1]
**é—®é¢˜**ï¼š[å…·ä½“é—®é¢˜æè¿°]
**æ–¹æ¡ˆ**ï¼š[è§£å†³æ–¹æ¡ˆ]

**é—®é¢˜**ï¼š[å…·ä½“é—®é¢˜æè¿°]
**æ–¹æ¡ˆ**ï¼š[è§£å†³æ–¹æ¡ˆ]

### [é—®é¢˜ç±»å‹2]
**é—®é¢˜**ï¼š[å…·ä½“é—®é¢˜æè¿°]
**æ–¹æ¡ˆ**ï¼š[è§£å†³æ–¹æ¡ˆ]

---
*æœ€åæ›´æ–°ï¼š$CURRENT_DATE*
EOF

echo -e "${GREEN}âœ… åˆ›å»ºæ–‡ä»¶: $SKILL_DIR/SKILL.md${NC}"

# ç»Ÿè®¡ä¿¡æ¯
FILE_SIZE=$(ls -lh "$SKILL_DIR/SKILL.md" | awk '{print $5}')
LINE_COUNT=$(wc -l < "$SKILL_DIR/SKILL.md" | tr -d ' ')

echo ""
echo -e "${BLUE}ğŸ“Š åˆ›å»ºå®Œæˆï¼${NC}"
echo -e "  åç§°: ${GREEN}$SKILL_NAME${NC}"
echo -e "  è·¯å¾„: ${GREEN}$SKILL_DIR${NC}"
echo -e "  å¤§å°: ${GREEN}$FILE_SIZE${NC}"
echo -e "  è¡Œæ•°: ${GREEN}$LINE_COUNT${NC}"
echo ""
echo -e "${YELLOW}âš¡ ä¸‹ä¸€æ­¥:${NC}"
echo "  1. ç¼–è¾‘æ–‡ä»¶è¡¥å……è¯¦ç»†å†…å®¹: vi $SKILL_DIR/SKILL.md"
echo "  2. é‡ç‚¹å®Œå–„ description ä¸­çš„è§¦å‘å…³é”®è¯"
echo "  3. æµ‹è¯• Skill è§¦å‘å‡†ç¡®ç‡"
echo ""
